<!DOCTYPE html>
<html>
<head>
    <title>Text Threshold Debug</title>
    <style>
        body { background: #333; color: #fff; font-family: sans-serif; padding: 20px; }
        .controls { margin-bottom: 20px; }
        .controls label { display: block; margin: 10px 0; }
        .controls input[type="range"] { width: 300px; }
    </style>
</head>
<body>
    <div class="controls">
        <label>
            Offset from darkest: <span id="offsetVal">50</span>
            <br><input type="range" id="offset" min="20" max="150" value="50" step="1">
        </label>
    </div>

    <script src="modal.js"></script>
    <script>
        const offsetSlider = document.getElementById('offset');
        const offsetVal = document.getElementById('offsetVal');
        
        window.TEXT_OFFSET = 50;
        
        function update() {
            window.TEXT_OFFSET = parseInt(offsetSlider.value);
            offsetVal.textContent = window.TEXT_OFFSET;
            
            textCache.clear();
            if (activeModal) closeModal();
            openModal('Settings');
        }
        
        offsetSlider.addEventListener('input', update);
        
        openModal('Settings');
    </script>
</body>
</html>
