<!DOCTYPE html>
<html>
<head>
    <title>Gamer's Remorse - Redefining The Metrics</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation" defer></script>
    <link rel="stylesheet" href="styles/index.css">
    <link rel="stylesheet" href="styles/tracker.css">
    <link rel="stylesheet" href="styles/items.css">
    <link rel="stylesheet" href="styles/modal.css">
    <script src="scripts/txt.js" defer></script>
    <script src="scripts/tracker.js" defer></script>
    <script src="scripts/sfx.js" defer></script>
    <script src="scripts/metrics.js" defer></script>
    <script src="scripts/progression.js" defer></script>
    <script src="scripts/achievements.js" defer></script>
    <script src="scripts/eye.js" defer></script>
    <script src="scripts/app.js" defer></script>
    <script src="scripts/items.js" defer></script>
    <script src="scripts/modal.js" defer></script>
</head>
<body>
    <div class="header">
        <div id="eye-container">
            <svg id="eye"></svg>
        </div>
        <div>
            <h1>Gamer's Remorse</h1>
            <div id="tagline"></div>
        </div>
        <div id="health-bar" class="health-bar"></div>
        <div id="item-bar" class="item-bar"></div>
    </div>

    <div class="nav">
        <a href="#">Play</a>
        <a href="#">Hall of Fame</a>
        <a href="#">Wall of Shame</a>
        <a href="#" onclick="openSettings(); return false;">Settings</a>
        <a href="#">Credits</a>
        <a href="#" onclick="return quitToDesktop();">Quit to Desktop</a>
    </div>

    <div class="main">
        <!-- METHODOLOGY -->
        <div class="col-methodology">
            <div class="box">
                <div class="box-header">What Am I Looking At?</div>
                <div class="box-body">
                    <p>
                        This chart shows <strong>when</strong> players leave reviews.
                        X-axis is playtime (log scale), Y-axis is review count.
                    </p>
                    <p id="color-legend">
                        <strong style="color: var(--color-positive)">Positive</strong> = positive.
                        <strong style="color: var(--color-negative)">Negative</strong> = negative.
                        <strong style="color: var(--color-uncertain)">Uncertain</strong> = edited after a week (fence-sitters).
                    </p>

                    <h3>Healthy vs Extractive</h3>
                    <p>
                        <strong>Healthy:</strong> Negative reviews cluster early. People who won't like it figure that out fast.
                    </p>
                    <p>
                        <strong>Extractive:</strong> Negative reviews come <em>after</em> positive ones.
                        Players get burned after investing significant time.
                    </p>

                    <h3>The Median Lines</h3>
                    <p>
                        Dashed lines show median playtime for each sentiment.
                        When negative median sits <em>right</em> of positive, that's extraction.
                    </p>
                </div>
            </div>

            <div class="box">
                <div class="box-header">How do the tags work?</div>
                <div class="box-body">
                    <p>
                        TAGS are inferred from the shape of the charts and from the contents of the examined reviews.
                        They do not (necessarily) represent the opinions of the players, and they are not to be taken or shared as objective statements (unless sourced from reddit and adequately padded with weasel words).
                    </p>
                    <p>
                        The sampling algorithm does not strive to represent the current recommended/not recommended ratio faithfully;
                        it tries to find as many different opinions as possible and then it weighs them against the nominal ratio when it makes sense to do so.
                    </p>
                    <p>
                        Some tags are mutually exclusive, and some tags can level up. For example, PREDATORY is a stronger version of EXTRACTIVE.
                        Gotta match 'em all.
                    </p>
                </div>
            </div>
        </div>

        <!-- VERDICT: Search + Tags + What Happened -->
        <div class="col-verdict">
            <div class="box">
                <div class="box-header">Analyze</div>
                <div class="box-body">
                    <div class="search-row">
                        <input type="text" id="appId" placeholder="Steam App ID or store URL">
                        <button onclick="analyze()">Analyze</button>
                    </div>
                    <h2 id="game-title"></h2>
                    <div id="stats"></div>
                    <div id="metrics-detail">
                        <p style="color: #999; font-style: italic;">
                            Enter a Steam App ID or URL to analyze.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- CHARTS -->
        <div class="col-charts">
            <div class="box">
                <div class="box-header light">Playtime Distribution</div>
                <div class="box-body">
                    <div class="chart-controls">
                        <label><input type="checkbox" id="hideAnomalies"> Hide anomalies</label>
                        <label><input type="checkbox" id="hideSpikes"> Hide bombs/brigades</label>
                        <label><input type="checkbox" id="hideAnnotations"> Hide annotations</label>
                        <label><input type="checkbox" id="showTotalTime"> Show total playtime</label>
                    </div>
                    <div class="chart-container">
                        <div class="chart-wrapper">
                            <canvas id="chart"></canvas>
                            <div id="labels-container"></div>
                        </div>
                        <div id="timeline-range"></div>
                        <canvas id="timeline"></canvas>
                    </div>
                    <div class="chart-row">
                        <div class="chart-half">
                            <h3 class="chart-title">How long do people keep playing after reviewing?</h3>
                            <div class="chart-container velocity">
                                <canvas id="velocity-chart"></canvas>
                            </div>
                        </div>
                        <div class="chart-half">
                            <h3 class="chart-title">How Creative Is Their Language?</h3>
                            <div class="chart-container language">
                                <canvas id="language-chart"></canvas>
                            </div>
                        </div>
                    </div>
                    <h3 class="chart-title">Who Changed Their Mind When?</h3>
                    <div class="chart-container heatmap">
                        <canvas id="edit-heatmap"></canvas>
                        <div id="heatmap-tooltip" class="heatmap-tooltip"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- OPINION -->
        <div class="col-opinion">
            <div class="box">
                <div class="box-header">So What?</div>
                <div class="box-body" id="opinion-content">
                    <p style="color: #999; font-style: italic;">
                        Analyze a game to see the verdict.
                    </p>
                </div>
            </div>
        </div>
    </div>
</body>
</html>